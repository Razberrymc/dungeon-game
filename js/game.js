let chapter = 1;
let m1 = "After travelling for weeks, you arrive at a seemingly abandonned castle illuminated by moonlight. As you seek refuge inside, torches magically set themselves ablaze. You can see a staircase made of obsidian leading into the depths of the castle. At last! The entrance to the dungeon of legend! The stories you heard as a child were true. The only thing standing between you and untold riches is the willpower to take the dive."

let m2 = "You make your descent, the light fading with each step you take. After plunging into the darkness for what seems like an eternity, you reach a stone clearing with diverging paths. A torch is situated near the entrance to the clearing. The skeletal remains of adventurers litter the floor. One of the skeletons appears to have died clutching the contents of their backpack. They sit in the very middle of the two paths. Perhaps they couldn't decide which way to go."

let m3 = "You venture left. As you make your way down the barren corridor the volume of cobwebs clinging to the stone increases. You cut down the webbing blocking your way, but the amount becomes so dense it obscures your vision. Finally, you reach the end of the hall. There appears to be nothing at the end except a marble wall with a message written in blood: EVERY HUMAN HAS A VICE. OFFER UP A SACRIFICE."

let m4 = "You toss your sword towards the wall with a clang. A few seconds pass and your weapon slowly begins to liquify into blood. You feel something from behind loom over you, bend down, and whisper in your ear with a constrained voice: PROCEED TO CLAIM YOUR REWARD. You turn to face the unknown entity, but find nothing behind you. You refocus your attention towards the wall, but all traces of it seem to have disappeared. Instead, you see an extension of the corridor, with a crimson door on the left, a metal door in the middle, and a hole in the wall on the right."

let m5 = "You step through the crimson door. A dark red orb sits on the floor. You hear it calling out to you in a sickly sweet voice. You are powerless to resist its call, and are compelled to reach out and touch it. Once you make contact with the orb, you feel a searing pain as your life force withers away......YOU DIED"

let m6 = "You toss some gold coins at the wall. A few seconds pass and the money begins to liquify into molten gold. The hall begins to tremble and a wall emerges behind you sealing you in. The marble wall's message has changed to one written in molten gold: A POOR ATTEMPT TO CHEAT THE WALL. YOUR OFFERED TREASURES WERE MUCH TOO SMALL. IF YOUR ONLY CARE IS COIN. THE DUNGEON YOU WILL FOREVER JOIN. The walls close in on you until you are unable to move. Molten gold begins to pour out of the ceiling, completely encasing you; a permanent resident of the dungeon......YOU DIED"

let m7 = "It takes almost all of your strength to force open the metal door. As you enter the dimly lit room, you notice a seated knight in a rusted set of armor staring at the ground. Upon closer inspection, you see chains around their legs. Your, observations are interupted by the metal door slamming shut from behind. Audible locking mechanisms echo throughout the room. The sound appears to have stirred the armor bearer. As they begin to stand, you hear their creaking metal. The knight has drawn his sword and is running at you. You reach for your weapon, but find nothing in its place...."

let m8 = "Armed with nothing but your bare fists, you quickly charge at the massive knight. You put all your power into your fist, hoping to punch through the knight's armor. Your fist makes contact with a rusty area of the armor. You hear the metal rupture. As you break through, you run your fist through the knight's body. The rusted armor bearer's metalic voice echoes: THANK YOU FOR RELEASING ME FROM THIS CURSE. You look up and see the life leave the knight's glowing eyes. Your vision fades. You regain consciousness and find yourself seated in a suit of armor. You attempt to stand, but you are bound by chains. It appears you are now a permanent resident of the dungeon. You are......ALIVE, but at what cost?"

let m9 = "Armed with nothing but your bare fists, you quickly charge at the massive knight. You put all your power into your fist, hoping to punch through the knight's armor. Your fist makes contact with the armor. You hear the bones in your hand shatter. You reel back in pain. The knight takes this opportunity to run his sword through your chest......YOU DIED"

let m10 = "You toss a dog toy at the wall with a squeak. A few seconds pass and a toaster oven ding goes off. Confused, you look around to see if you passed or failed the challenge. You notice the marble wall's message has changed to one written in glitter glue: THIS ADVENTURER HAS ANIMAL AFFINITY. THEREFORE HE MAY LEAVE THIS DEADLY VICINITY. RETURN TO YOUR DOG WITH THIS PARTING GIFT. THE EXIT IS OPEN, STEP ONTO THE LIFT. As you finish reading the message, bricks to your right begin to disassemble, revealing a lift to the surface. As you begin walking towards it a golden dog bowl with the inscription 'World's Best Dog' falls from above with a clunk. You pick up your treasure and take the lift to the surface......YOU ESCAPED WITH TREASURE!"

let m11 = "You peer into your bag, inspecting your remaining snacks. Perhaps the wall will be satisfied with one of these."

let m12 = "Regrettably, you toss your favorite sugary treat at the wall. A few seconds pass and the doughnut begins to emanate a heavenly white light. The light dims and what was once a doughnut is now a doughnut hole. The marble wall splits in half, revealing a golden hourglass with gravity-defying sand flowing from bottom to top. The hourglass rests atop a pedestal with the inscription: GLASS OF CREATION. A magical artifact like this must be worth a fortune! You go to pick up the hourglass, but once you touch it, you begin to rapidly age in reverse! You let go of the glass before you become younger than 13. The glass of creation shatters on the ground, and you are thrown back in time. A stream of everything that has ever happened engulfs you and is unbearable to watch. You spot the Glass of Creation slowly reforming and deduce that it is taking you to when it was made. You near the end of the stream and a flash overtakes your vision, blinding you......YOU GUESS THAT YOU ARE ALIVE? Devoid of your sense of sight it is impossible to tell where you are. There is an overwhelming silence as you float through what feels like an abyssal plane."

let m13 = "Favoring the taste of sugar, you toss an apple at the wall. A few seconds pass and the apple begins to emanate a deep black light. The light dims and the apple is now rotten to the core. The marble wall splits in half, revealing an obsidian hourglass with endless sand flowing out of a crack in the bottom. The hourglass rests atop a pedestal with the inscription: GLASS OF DESTRUCTION. A magical artifact like this must be worth a fortune! You go to pick up the hourglass, but once you touch it, you begin to rapidly age! You let go as soon as you can, but feel very ancient. If you had to guess, you must be at least 90 years old. There is no way for you to physically continue diving into the dungeon. You wrap your hands in cloth, carefully put the hourglass in your bag, and head towards the exit......YOU ESCAPED WITH TREASURE, but was it worth giving up all those years of life?"

let m14 = "You step through the hole into a large tunnel leading downward. You make your way through the declining terrain until it is pitch black. You hear a familiar voice calling your name, you break into a sprint to see who it is. Suddenly, you are overcome with fatigue and pass out. Your eyes flit open and you are at the entrance to your grandparents' house. You find your bearings. This does not appear to be a trick, this is reality. You knock on the door and are greeted by a collection of family members. With smiling faces, they invite you to sit down and eat the feast they have laid out for everyone. You can't help but feel thankful......YOU ESCAPED WITH HAPPINESS"

let m15 = "You feel uneasy about continuing without your weapon. You recall seeing a rusted spear on the way over, so you turn around to retrieve it. This time, upon turning around you are petrified with fear. A giant part-human, part-spider creature glares at you agrily with its void colored set of eyes. You try to speak, but you are so overcome with terror, you do not make a single sound. The creature bellows: UNGRATEFUL, UNGRATEFUL, UNGRATEFUL! You cower on the ground, completely defenseless. The enormous arachnid monster looms over you, and skewers you with its sharp appendages......YOU DIED"

let m16 = "You venture right. As you walk down the hall, you notice elegant fabrics hang from above, and several paintings line the walls. All of the art and fabrics were torn or damaged, but it must have been beautiful in its original condition. Eventually, you walk through a grand arch and find yourself in a library. Towering bookshelves fill the room. Farther away, you see someone seated at a large curved desk staring straight ahead, quietly humming a tune."

let m17 = "You decide it best to avoid confrontation and sneak throughout the library in search of valuable tomes. You come across an area with signs labeled 'RESTRICTED, LIBRARIAN ACCESS ONLY.' You quietly pick the lock barring you from the restricted section and sneak through the area. You finally come across a glass case which appears to house something of value. The inscription on the case reads 'BOOK OF INFINITE KNOWLEDGE'. You look at the book, glyphs and symbols emanate from the tome. You open the case, grab the book, and begin to sneak out of the library. You get to the arch and need to decide how to get out of this area."

let m18 = "You approach the curved table. Upon closer inspection, you notice that this isn't exactly a person, but a synthetic automaton made to look like one. The 'person' seated stands to greet you: 'Welcome to the compendium, I am the librarian! It has been exactly 297 years, 78 days, and 12 hours since we last received a visitor. I know where everything is in the dungeon, assuming it hasn't been moved! I am responsible for-for-fo- What can I help you with today?'"

let m19 = "You reach for the torch and attempt to pull it off the wall. You hear gears begin to turn, as the floor collapses from underneath you. You fall for a few seconds before a large spike impales you. That was fast......YOU DIED"

let m20 = "You look inside the backpack and find a blue orb nestled in the skeletons hands. It looks priceless! You reach in with both hands to pick it up. However, as soon as you touch it your vision tints your environment to a light blue and you can no longer move. The only thing you can do is look around the room without moving your head. As you look around the room blue spectral spirits erupt into laughter. 'I told you he was gonna touch it!' It looks like you figured out why there are so many skeletons in this area......YOU WILL DIE SOON"

let m21 = "You bolt out from behind a bookcase and past the entrance arch. You look behind you to see if the person is still behind the desk. You are astounded to see that they are only ten feet away from you. The person's eyes glow an intense red as they lunge for you while screaming in a strange metallic voice: YOU WILL NOT BE STEALING PROPERTY FROM THE COMPENDIUM! It dawns upon you that this thing is clearly not human and is some sort of machine. The mechanical person manages to tackle you and pin you down. It places its hands on your chest and sends a powerful electrical current through you, frying your insides. Your heart stops beating......YOU DIED"

let m22 = "As you evade the seated person's gaze, you manage to sneak out of the library without making a sound. You begin to head back the way you came the with treasure in hand. Once you feel it is safe, you open the tome and attempt to read it. Incomprehensible symbols swirl around you. You're not sure if anyone in the world can understand something so complex! Nevertheless, the book must be worth a great deal of gold......YOU ESCAPED THE DUNGEON WITH TREASURE"

let m23 = "You attempt to sneak past the arch but the person behind the desk notices you. They call out in a strange metallic voice: 'All materials must be checked out with me, and they may not leave the compendium! Allow me to assist you!' They run up to you with incredible speed and are in front of you within seconds. You are able to get a good look at this person for the first time and realize that he is some sort of automaton. You attempt to hide the book behind your back, but he snatches it out of your hands. A second of silence passes and then the automaton erupts: THIS IS A RESTRICTED TEXT, THE PENALTY FOR ACCESSING RESTRICTED TEXT WITHOUT CLEARANCE IS DEATH! Before you can even react, you are pierced by a powerful red light emitted from the machine's eyes......YOU DIED"

let m24 = "'Ah! Are you a sch-sch-scholar that wishes to research the artifacts contained in the dungeon?' You give a vague answer resembling yes and the automaton escorts you to an area of the library filled with swirling mystical portals. He points to one and says: 'This portal will take you directly to the most valuable artifact in the dungeon.' You can hardly contain yourself and jump in without a second thought. Instantaneously, you are transported to an unfathomably large cavernous pit. Looming over you is a titanic 50 foot golden sword. Even if you could take this treasure with you, there appeared to be no way out of the pit...... You make yourself comfortable and prepare to spend the remainder of your days with the most valuable sword you have ever seen. If only you could eat gold."

let m25 = "The automaton lets out a strange noise that resembles laughter. 'How comical! I am the most powerful arti-arti-artifact in the dungeon. If you wish to reappropriate me, you must reset me.' The automaton opens a hatch at the top of its head. You go to inspect the inside. 'Just hold down the small red button-' You hold down the button '-but don't forget to remove the origina-' The automaton's voice cuts out, and a few seconds pass before it reawakens. Only this time, it has a deep unforgiving voice. It locks eyes with you and utters: 'THREAT DETECTED.' It grabs both of your shoulders and literally rips you in half......YOU DEFINITELY DIED"

let message = m1;

writeResults();

function writeResults() {
  document.querySelector("#narration").textContent = message;
};

let btnGrid = document.querySelectorAll('.btnGrid button');

const button1 = document.querySelector('#button1');
const button2 = document.querySelector('#button2');
const button3 = document.querySelector('#button3');
const button4 = document.querySelector('#button4');

// when some is click, then
// if (message = m1) {
//   hideAll();
//
// } else if {
//
// }

function handler1() {
  if (chapter == 1) {
    console.log("chapter1button1clicked");
    showAll();
    button1.textContent = "Walk down the left corridor";
    message = m2;
    chapter = 2;
    writeResults();
  } else if (button1.textContent === "Take me to the most valuable artifact in the dungeon") {
    hideAll();
    message = m24;
    writeResults();
  } else if (button1.textContent === "Run for it") {
    hideAll();
    message = m21;
    writeResults();
  } else if (button1.textContent === "Sneak through the library") {
    showAll();
    button1.textContent = "Run for it"
    button2.textContent = "Sneak out (30% Chance of Success)"
    message = m17;
    writeResults();
  } else if (button1.textContent === "Choose Pink Frosted Sprinkled Doughnut") {
    hideAll();
    message = m12;
    writeResults();
  } else if (chapter == 2) {
        console.log("chapter2button1clicked");
        showAll();
        button1.textContent = "Offer Sword (Wrath)";
        button2.textContent = "Offer Gold (Greed)";
        button3.textContent = "Offer Food (Gluttony)";
        button4.textContent = "Offer Dog Toy (???)";
        message = m3;
        chapter = 3;
        writeResults();

      } else if (chapter == 3) {
          console.log("chapter3button1clicked");
          showAll();
          button1.textContent = "Go through the crimson door";
          button2.textContent = "Go through the metal door";
          button3.textContent = "Go through the hole in the wall";
          button4.textContent = "Turn around";
          message = m4;
          chapter = 4;
          writeResults();
        } else if (chapter == 4){
            console.log("chapter4button1clicked");
            hideAll();
            message = m5;
            writeResults();
  }
}



function handler2() {
  if (chapter == 1) {
    console.log("chapter1button2clicked")
    showAll();
    button2.textContent = "Walk down the right corridor";
    message = m2;
    chapter = 2;
    writeResults();
//placechance
//placeplace
} else if (button2.textContent === "Sneak out (30% Chance of Success)") {
      let sneakChance = Math.floor(Math.random() * 20) + 1;
      if (sneakChance <= 6) {
    message = m22;
    hideAll();
    writeResults();
  } else {
    hideAll();
    message = m23;
    writeResults();
      }
//place option2
} else if (button2.textContent === "Power Through (50% Chance of Success)") {
        let survivalChance = Math.floor(Math.random() * 20) + 1;
        if (survivalChance <= 10) {
      message = m8;
      document.getElementById('button2').style.visibility = 'hidden';
      writeResults();
    } else {
      document.getElementById('button2').style.visibility = 'hidden';
      message = m9;
      writeResults();
    }
    } else if (button2.textContent === "Go through the metal door") {
        message = m7;
        document.getElementById('button1').style.visibility = 'hidden';
        document.getElementById('button3').style.visibility = 'hidden';
        document.getElementById('button4').style.visibility = 'hidden';
        button2.textContent = "Power Through (50% Chance of Success)"
        writeResults();
      } else if (chapter == 2) {
          console.log("chapter2button2clicked");
          showAll();
          button1.textContent = "Sneak through the library";
          button2.textContent = "Approach the curved desk";
          button3.style.visibility = "hidden";
          button4.style.visibility = "hidden";
          message = m16;
          chapter = 3;
          writeResults();
    } else if (button2.textContent === "Approach the curved desk") {
      showAll();
      button1.textContent = "Take me to the most valuable artifact in the dungeon"
      button2.textContent = "Take me to the most powerful artifact in the dungeon"
      message = m18;
      writeResults();
    } else if (button2.textContent === "Take me to the most powerful artifact in the dungeon") {
      hideAll();
      message = m25;
      writeResults();
    } else if (button2.textContent === "Choose Apple") {
      hideAll();
      message = m13;
      writeResults();
    }  else if (button2.textContent = "Offer Gold (Greed)") {
      message = m6;
      hideAll();
      writeResults();
    } else if (chapter == 3) {
        console.log("chapter3button2clicked");
        showAll();
        button1.textContent = "Fight";
        message = mm4;
        chapter = 4;
    }
}

function handler3() {
if (chapter == 1) {
  console.log("chapter1button3clicked");
  showAll();
  button3.textContent = "Walk down the left corridor";
  message = m2;
  chapter = 2;
  writeResults();
} else if (button3.textContent === "Grab torch") {
  hideAll();
  message = m19;
  writeResults();
} else if (button3.textContent === "Offer Food (Gluttony)") {
  button1.textContent = "Choose Pink Frosted Sprinkled Doughnut"
  button2.textContent = "Choose Apple"
  button3.style.visibility = "hidden";
  button4.style.visibility = "hidden";
  message = m11;
  writeResults();
} else if (chapter == 2) {
      console.log("chapter2button3clicked");
      showAll();
      button1.textContent = "Offer Sword (Wrath)";
      button2.textContent = "Offer Gold (Greed)";
      button3.textContent = "Offer Food (Gluttony)";
      button4.textContent = "Offer Dog Toy (???)";
      message = mmm3;
      chapter = 3;
      writeResults();
    } else if (button3.textContent === "Go through the hole in the wall") {
      hideAll();
      message = m14;
      writeResults();
    } else if (chapter == 3) {
        console.log("chapter3button3clicked");
        showAll();
        button1.textContent = "Offer Sword (Wrath)";
        message = mmm4;
        chapter = 4;
        writeResults();
}
}

function handler4() {
  if (chapter == 1) {
    console.log("chapter1button4clicked");
    showAll();
    button4.textContent = "Search backpack";
    message = m2;
    chapter = 2;
    writeResults();
  } else if (button4.textContent === "Search backpack") {
    hideAll();
    message = m20;
    writeResults();
  } else if (button4.textContent === "Turn around") {
    hideAll();
    message = m15;
    writeResults();
  } else if (button4.textContent === "Offer Dog Toy (???)") {
    hideAll();
    message = m10;
    writeResults();
  } else if (chapter == 2) {
        console.log("chapter2button4clicked");
        showAll();
        button1.textContent = "Offer Sword (Wrath)";
        button2.textContent = "Offer Gold (Greed)";
        button3.textContent = "Offer Food (Gluttony)";
        button4.textContent = "Offer Dog Toy (???)";
        message = mmmm3;
        chapter = 3;
        writeResults();
      } else if (chapter == 3) {
          console.log("chapter3button4clicked");
          showAll();
          button1.textContent = "Offer Sword (Wrath)";
          message = mmmm4;
          chapter = 4;
          writeResults();
  }
}

//function knightAttack() {
//if (button2.textContent === "Struggle") {
    //let survivalChance = Math.floor(Math.random() * 20) + 1;
    //if (survivalChance <= 10) {
	//message = m8;
//} else {
  //message = m9;
    //}
  //}
//}

function hideAll() {
      btnGrid.forEach(function(el) {
        el.style.display = 'none';
      });
    }

function showAll() {
      btnGrid.forEach(function(el) {
        el.style.display = 'block';
      });
    }

hideAll();
button1.style.display = "block";

window.onload = function() {
  document.getElementById("nightsound").play();
}
